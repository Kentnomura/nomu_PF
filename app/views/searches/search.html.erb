<div class="container">
  <div class="row mt-2">
    <h2 class="col-lg-3 col-md-5 col-sm-10 head-line title_h2 bg-secondary text-white text-center">検索結果</h2>
  </div>
</div>

<% if @users.exists? %>
  <div class="container">
    <div class="row mt-3">
      <div class="col-lg-12">
        <table class="table table-hover text-center table-inverse">
          <thead class="bg-dark">
            <tr class="text text-white">
              <th></th>
              <th>
                名前
              </th>
              <th>
                マイページ
              </th>
              <th>
                フォロー数
              </th>
              <th>
                フォロワー数
              </th>
              <th>
                いいね数
              </th>
              <th>
                フォロー状態
              </th>
            </tr>
          </thead>
          <tbody class="bg-light">
            <% @users.each do |user| %>
              <tr>
               <th>
                  <%= image_tag user.get_profile_image, size: '100x100', class:"rounded-circle" %>
                </th>
                <th class="pt-5">
                  <%= user.name %>
                </th>
                <th class="pt-5">
                  <%= link_to "アカウントへ", user_path(user) %>
                </th>
                <th class="pt-5">
                  フォロー数: <%= user.followings.count %>
                </th>
                <th class="pt-5">
                  フォロワー数: <%= user.followers.count %>
                </th>
                <th class="pt-5">
                  いいね数: <%= user.favorites.count %>
                </th>
                <th class="pt-5">
                  <% if current_user != user %>
                    <% if current_user.name != "guestuser" %>
                      <% if current_user.following?(user) %>
                        <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete %>
                      <% else %>
                        <%= link_to "フォローする", user_relationships_path(user.id), method: :post %>
                      <% end %>
                    <% end %>
                  <% end %>
                </th>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
<% else %>
  <div class="container">
    <div class="row mt-2">
      <div class="col text text-center text-white">
        <h2>該当のアカウントは、いません</h2>
      </div>
    </div>
  </div>
  </div>
<% end %>


<div class="row d-flex justify-content-center">
  <%= paginate @users %>
</div>
